#UAParser [![Build Status](https://secure.travis-ci.org/randyzwitch/UAParser.jl.png?branch=master)](https://travis-ci.org/randyzwitch/UAParser.jl)

UAParser is a Julia port of ua-parser(https://github.com/tobie/ua-parser), which itself is a multi-language port of [BrowserScope's](http://www.browserscope.org) [user agent string parser](http://code.google.com/p/ua-parser/). Per the [README file](https://github.com/tobie/ua-parser/blob/master/README.markdown) from that project:


"The crux of the original parser--the data collected by [Steve Souders](http://stevesouders.com/) over the years--has been extracted into a separate [YAML file](https://github.com/tobie/ua-parser/blob/master/regexes.yaml) so as to be reusable _as is_ by implementations in other programming languages."

UAParser is a limited Julia implementation heavily influenced by the [Python code](https://github.com/tobie/ua-parser/tree/master/py) from the ua-parser library.

##Code examples

The API for UAParser revolves around three main functions: `parsedevice`, `parseos` and `parseuseragent`, with a fourth function `parseall` which is just a convenience function that runs the other three functions for a given user-agent string. The function names and return values are modeled after the Python version of the ua-parser project. Each function takes one argument, `user_agent_string::String` and returns a Dict.

```julia
  using UAParser
  
  #Example user-agent string
  user_agent_string = "Mozilla/5.0 (iPhone; CPU iPhone OS 5_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B179 Safari/7534.48.3"
  
  #Get device from user-agent string
  parsedevice(user_agent_string) #=> {"family"=>"iPhone"}
  
  #Get browser information from user-agent string
  parseuseragent(user_agent_string) #=> {"major"=>"5","minor"=>"1","patch"=>"","family"=>"Mobile Safari"}
  
  #Get os information
  parseos(user_agent_string) #=> {"major"=>"5","minor"=>"1","patch"=>nothing,"patch_minor"=>"","family"=>"iOS"}
  
  #Get all information
  parseall(user_agent_string) #=> {"user_agent"=>{"major"=>"5","minor"=>"1","patch"=>"","family"=>"Mobile Safari"},"string"=>"Mozilla/5.0 (iPhone; CPU iPhone OS 5_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B179 Safari/7534.48.3","os"=>{"major"=>"5","minor"=>"1","patch"=>nothing,"patch_minor"=>"","family"=>"iOS"},"device"=>{"family"=>"iPhone"}}
```

You can index into the results of these functions like any other Julia Dict. Pass an individual key to get the value.

```julia
  #Get just browser information, no version information
  x1 = parseuseragent(user_agent_string)
  x1["family"] #=> "Mobile Safari"
  
  #Get the os, no version information
  x2 = parseos(user_agent_string)
  x2["family"] #=> "iOS"

```

##Validation testing

Validation of the results provided by UAParser will be evaluated against the [test files](https://github.com/tobie/ua-parser/tree/master/test_resources) provided by the maintainers of the ua-parser library as feasible. Currently, `parsedevice` and `parseos` passes all test cases; `parseuseragent` passes a majority of tests (see Test #4 for failing user-agent strings); the non-matching `parseuseragent` calls are due to currently not replicating the jsParseBits functionality from the reference Python script. This functionality may or may not be implemented in the future, depending on prevalence of these oddities in the wild.

Testing will be eventually built into the Travis build as well.


##Licensing

The data contained in regexes.yaml is Copyright 2009 Google Inc. and available under the Apache License, Version 2.0. The licensing of the UAParser Julia module is under the [default MIT Expat license](https://github.com/randyzwitch/UAParser.jl/blob/master/LICENSE.md) as generated by the default `Pkg.generate` function in Julia, and will do so until such time as I understand that it needs to be changed to accomodate either the regexes.yaml file or that using the Python code as a template requires a change in licensing.
